---
- name: AWS | IGW create
  ec2_vpc_igw:
    state: present
    region: "{{ item_vpc.region }}"
    vpc_id: "{{ vpc_id }}"
  register: ret_igw

- name: AWS | IGW name
  ec2_tag:
    state: present
    region: "{{ item_vpc.region }}"
    resource: "{{ ret_igw.gateway_id }}"
    tags:
      Name: "{{ item_vpc.name }}-igw"

- name: AWS | IGW fact
  set_fact:
    vpc_igw: "{{ ret_igw.gateway_id }}"
